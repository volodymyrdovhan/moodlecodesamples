{"version":3,"sources":["../src/intellicart_tablefilters.js"],"names":["define","$","flatpickr","log","TableFilters","tablecontainer","formcontainer","init","change","cleanDownload","attr","formSubmit","each","el","document","getElementById","elclass","data","mode","dateFormat","onChange","dateObj","dateStr","length","info","calendarContainer","classList","add","click","exportformat","find","val","e","preventDefault","page","parseInt","text","submit"],"mappings":"yQAsBAA,MAAM,CAAC,CAAC,QAAD,CAAW,6BAAX,CAA0C,UAA1C,CAAD,CAAwD,SAASC,CAAT,CAAYC,CAAZ,CAAuBC,CAAvB,CAA4B,CAEtF,GAAIC,CAAAA,CAAY,CAAG,CAEfC,cAAc,CAAS,yBAFR,CAGfC,aAAa,CAAU,oBAHR,CAKfC,IAAI,CAAE,eAAW,CACbN,CAAC,CAACG,CAAY,CAACE,aAAb,CAA6B,yBAA7B,CACEF,CAAY,CAACE,aADf,CAC+B,wBADhC,CAAD,CAC2DE,MAD3D,CACkE,UAAW,CACzEJ,CAAY,CAACK,aAAb,GACA,GAAuC,WAAnC,EAAAR,CAAC,CAAC,IAAD,CAAD,CAAQS,IAAR,CAAa,iBAAb,CAAJ,CAAoD,CAChDN,CAAY,CAACO,UAAb,EACH,CACJ,CAND,EAQAV,CAAC,CAACG,CAAY,CAACE,aAAb,CAA6B,uCAA9B,CAAD,CAAsEM,IAAtE,CAA2E,UAAW,IAC9EC,CAAAA,CAAE,CAAGC,QAAQ,CAACC,cAAT,CAAwBd,CAAC,CAAC,IAAD,CAAD,CAAQS,IAAR,CAAa,IAAb,CAAxB,CADyE,CAE9EM,CAAO,CAAGf,CAAC,CAAC,IAAD,CAAD,CAAQgB,IAAR,CAAa,OAAb,CAFoE,CAGlFJ,CAAE,CAACX,SAAH,CAAa,CACTgB,IAAI,CAAE,OADG,CAETC,UAAU,CAAE,OAFH,CAGTC,QAAQ,CAAE,kBAASC,CAAT,CAAkBC,CAAlB,CAA2B,CACjC,GAAsB,CAAlB,EAAAD,CAAO,CAACE,MAAZ,CAAyB,CACrBnB,CAAY,CAACO,UAAb,GACAR,CAAG,CAACqB,IAAJ,SAAgBF,CAAhB,EACH,CACJ,CARQ,CAAb,EASGG,iBATH,CASqBC,SATrB,CAS+BC,GAT/B,CASmCX,CATnC,CAUH,CAbD,EAeAf,CAAC,CAACG,CAAY,CAACC,cAAb,CAA8B,sDAA/B,CAAD,CAAsFuB,KAAtF,CAA4F,UAAW,CACnG,GAAIC,CAAAA,CAAY,CAAG5B,CAAC,CAAC,IAAD,CAAD,CAAQS,IAAR,CAAa,oBAAb,CAAnB,CACAT,CAAC,CAACG,CAAY,CAACE,aAAd,CAAD,CAA8BwB,IAA9B,CAAmC,0BAAnC,EAA6DC,GAA7D,CAAiEF,CAAjE,EACAzB,CAAY,CAACO,UAAb,EACH,CAJD,EAMAV,CAAC,CAACG,CAAY,CAACC,cAAb,CAA8B,qBAA/B,CAAD,CAAuDuB,KAAvD,CAA6D,SAASI,CAAT,CAAY,CACrEA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAI,CAAGC,QAAQ,CAAClC,CAAC,CAAC,IAAD,CAAD,CAAQmC,IAAR,EAAD,CAAnB,CACAF,CAAI,CAAW,CAAP,CAAAA,CAAD,CAAcA,CAAI,CAAC,CAAnB,CAAwB,CAA/B,CACAjC,CAAC,CAACG,CAAY,CAACE,aAAd,CAAD,CAA8BwB,IAA9B,CAAmC,sBAAnC,EAAyDC,GAAzD,CAA6DG,CAA7D,EACA9B,CAAY,CAACK,aAAb,GACAL,CAAY,CAACO,UAAb,EACH,CAPD,CAQH,CA3Cc,CA8CfA,UAAU,CAAE,qBAAW,CACnBV,CAAC,CAACG,CAAY,CAACE,aAAd,CAAD,CAA8B+B,MAA9B,GACAlC,CAAG,CAACqB,IAAJ,SAAgBtB,CAAhB,EACH,CAjDc,CAmDfO,aAAa,CAAE,wBAAW,CACtBR,CAAC,CAACG,CAAY,CAACE,aAAd,CAAD,CAA8BwB,IAA9B,CAAmC,0BAAnC,EAA6DC,GAA7D,CAAiE,EAAjE,CACH,CArDc,CAAnB,CA2DA,MAAO3B,CAAAA,CAEV,CA/DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Version details\n *\n * @package    local_intellicart\n * @copyright  2017 SEBALE (http://sebale.net)\n */\n\ndefine(['jquery', 'local_intellicart/flatpickr', 'core/log'], function($, flatpickr, log) {\n\n    var TableFilters = {\n\n        tablecontainer:        '.custom-filtering-table',\n        formcontainer:         '.form-table-filter',\n\n        init: function() {\n            $(TableFilters.formcontainer + ' .filters-block input, ' +\n                TableFilters.formcontainer + ' .filters-block select').change(function() {\n                TableFilters.cleanDownload();\n                if ($(this).attr('data-input-type') != 'daterange') {\n                    TableFilters.formSubmit();\n                }\n            });\n\n            $(TableFilters.formcontainer + ' input[data-input-type=\"daterange\"]').each(function() {\n                var el = document.getElementById($(this).attr('id'));\n                var elclass = $(this).data('class');\n                el.flatpickr({\n                    mode: \"range\",\n                    dateFormat: \"Y-m-d\",\n                    onChange: function(dateObj, dateStr) {\n                        if (dateObj.length == 2) {\n                            TableFilters.formSubmit();\n                            log.info(typeof(dateStr));\n                        }\n                    },\n                }).calendarContainer.classList.add(elclass);\n            });\n\n            $(TableFilters.tablecontainer + ' .report-export-panel a[data-type=\"download-link\"]').click(function() {\n                var exportformat = $(this).attr('data-download-type');\n                $(TableFilters.formcontainer).find('input[name=\"download\"]').val(exportformat);\n                TableFilters.formSubmit();\n            });\n\n            $(TableFilters.tablecontainer + ' .intb-pagination a').click(function(e) {\n                e.preventDefault();\n                var page = parseInt($(this).text());\n                page = (page > 0) ? (page-1) : 0;\n                $(TableFilters.formcontainer).find('input[name=\"page\"]').val(page);\n                TableFilters.cleanDownload();\n                TableFilters.formSubmit();\n            });\n        },\n\n\n        formSubmit: function() {\n            $(TableFilters.formcontainer).submit();\n            log.info(typeof(flatpickr));\n        },\n\n        cleanDownload: function() {\n            $(TableFilters.formcontainer).find('input[name=\"download\"]').val('');\n        }\n    };\n\n    /**\n     * @alias module:local_intellicart/intellicart_tablefilters\n     */\n    return TableFilters;\n\n});"],"file":"intellicart_tablefilters.min.js"}